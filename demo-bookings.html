<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Demo ADD Bookings ‚Äì Barber√≠a</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050509;
      --bg-alt: #0b0b12;
      --card: #11111a;
      --accent: #fbbf24;
      --accent-strong: #f59e0b;
      --text: #f9fafb;
      --text-soft: #9ca3af;
      --border-subtle: #1f2933;
      --danger: #f97373;
      --success: #22c55e;
      --radius-xl: 24px;
      --radius-lg: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.55);
      --transition-fast: 0.18s ease-out;
    }

    * { box-sizing:border-box; margin:0; padding:0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #02030a 45%, #02030a 100%);
      color: var(--text);
      line-height: 1.5;
    }

    a { color: inherit; text-decoration: none; }

    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px 16px 48px;
    }

    /* HEADER DEMO */
    .demo-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:24px;
      gap:12px;
    }

    .demo-logo {
      display:flex;
      align-items:center;
      gap:10px;
    }

    .logo-mark {
      width:32px; height:32px;
      border-radius:14px;
      background: radial-gradient(circle at 30% 0%, #facc15, #f97316 40%, #111827 100%);
      display:flex; align-items:center; justify-content:center;
      font-weight:700; font-size:18px;
      box-shadow:var(--shadow-soft);
    }

    .demo-logo-text-title {
      font-size:14px;
      font-weight:600;
    }

    .demo-logo-text-sub {
      font-size:11px;
      color:var(--text-soft);
      text-transform:uppercase;
      letter-spacing:.12em;
    }

    .demo-header-right {
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .demo-tag {
      font-size:11px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(249,250,251,0.18);
      color:var(--text-soft);
      white-space:nowrap;
    }

    .btn {
      border-radius: var(--radius-pill);
      border: none;
      font-size: 13px;
      padding: 8px 16px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      white-space: nowrap;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color:#020617;
      box-shadow:0 14px 30px rgba(248,181,26,0.4);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow:0 20px 40px rgba(248,181,26,0.45);
    }

    .btn-outline {
      background:transparent;
      color:var(--text-soft);
      border:1px solid rgba(148,163,184,0.4);
    }

    .btn-outline:hover {
      border-color:var(--accent);
      color:var(--accent);
      transform:translateY(-1px);
    }

    .btn-back span {
      font-size:14px;
      margin-right:2px;
    }

    /* HERO */
    .demo-hero {
      margin-bottom:24px;
    }

    .demo-title {
      font-size:24px;
      margin-bottom:6px;
      letter-spacing:-0.02em;
    }

    .demo-title strong {
      background: linear-gradient(to right, #facc15, #fb923c);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }

    .demo-sub {
      font-size:13px;
      color:var(--text-soft);
      max-width:580px;
    }

    /* PASOS */
    .steps {
      display:flex;
      gap:10px;
      margin-top:14px;
      margin-bottom:6px;
      flex-wrap:wrap;
    }

    .step {
      display:flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      color:var(--text-soft);
      padding:5px 14px;
      border-radius:999px;
      border:1px solid rgba(31,41,55,0.8);
      background:rgba(15,23,42,0.85);
      cursor:pointer;
      transition:background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
    }

    .step-badge {
      width:18px; height:18px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      font-weight:600;
      background:#020617;
      color:var(--text-soft);
      transition:background var(--transition-fast), color var(--transition-fast);
    }

    .step.active {
      border-color:var(--accent);
      color:#050816;
      background:radial-gradient(circle at top, rgba(248,181,26,0.16), #020617);
      transform:translateY(-1px);
    }

    .step.active .step-badge {
      background:var(--accent);
      color:#020617;
    }

    /* LAYOUT PRINCIPAL */
    .demo-grid {
      display:grid;
      grid-template-columns: minmax(0,1.2fr) minmax(0,1fr);
      gap:16px;
      margin-top:18px;
    }

    .card {
      background:var(--bg-alt);
      border-radius:var(--radius-xl);
      border:1px solid var(--border-subtle);
      padding:16px;
      box-shadow:var(--shadow-soft);
    }

    .card-title {
      font-size:14px;
      font-weight:600;
      margin-bottom:8px;
    }

    .card-sub {
      font-size:12px;
      color:var(--text-soft);
      margin-bottom:10px;
    }

    .field-group {
      display:flex;
      flex-direction:column;
      gap:8px;
      font-size:12px;
      color:var(--text-soft);
    }

    .field-group label {
      display:flex;
      flex-direction:column;
      gap:3px;
    }

    .field-group input,
    .field-group select,
    .field-group textarea {
      padding:6px 10px;
      border-radius:10px;
      border:1px solid var(--border-subtle);
      background:#020617;
      color:var(--text);
      font-size:12px;
      resize:vertical;
      min-height:32px;
    }

    .field-inline {
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    .field-inline > label {
      flex:1 1 140px;
    }

    /* WRAPPERS FECHA / HORA TIPO APP */
    .input-shell {
      position:relative;
      display:flex;
      align-items:center;
      background:linear-gradient(135deg, rgba(15,23,42,0.95), #020617);
      border-radius:12px;
      border:1px solid var(--border-subtle);
      padding:2px 10px;
    }

    .input-shell-icon {
      font-size:13px;
      margin-right:6px;
      color:var(--text-soft);
    }

    .input-shell input {
      border:none;
      background:transparent;
      padding:6px 2px;
      width:100%;
      color:var(--text);
      font-size:12px;
      outline:none;
    }

    /* intentamos mejorar indicador nativo donde se pueda */
    .input-shell input[type="date"]::-webkit-calendar-picker-indicator,
    .input-shell input[type="time"]::-webkit-calendar-picker-indicator {
      filter: invert(0.8);
      opacity:0.8;
      cursor:pointer;
    }

    .service-meta {
      font-size:11px;
      color:var(--text-soft);
      margin-top:4px;
    }

    .service-meta strong {
      color:var(--accent);
      font-weight:500;
    }

    .chip-row {
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:4px;
      font-size:10px;
    }

    .chip {
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      color:var(--text-soft);
    }

    .chip.urban {
      border-color:rgba(248,181,26,0.7);
      color:var(--accent);
    }

    .status {
      font-size:11px;
      margin-top:6px;
      color:var(--text-soft);
    }

    /* COLUMNA DERECHA */
    .side-column {
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .summary-row {
      display:flex;
      justify-content:space-between;
      font-size:12px;
      margin-bottom:4px;
    }

    .summary-row span:last-child {
      font-weight:600;
    }

    .summary-row-muted {
      font-size:11px;
      color:var(--text-soft);
    }

    .price-highlight {
      font-size:20px;
      font-weight:700;
    }

    .deposit-text {
      font-size:11px;
      color:var(--accent);
      margin-top:2px;
    }

    .payment-methods {
      margin-top:10px;
      font-size:11px;
      color:var(--text-soft);
    }

    .payment-tags {
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:4px;
    }

    .payment-tag {
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      font-size:10px;
    }

    .whatsapp-preview {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size:12px;
      background:#020617;
      border-radius:12px;
      padding:10px;
      border:1px solid var(--border-subtle);
      color:var(--text-soft);
      white-space:pre-wrap;
    }

    .badge-demo {
      display:inline-flex;
      align-items:center;
      gap:4px;
      font-size:10px;
      color:var(--text-soft);
      margin-bottom:6px;
    }

    .badge-demo span {
      width:8px;
      height:8px;
      border-radius:999px;
      background:var(--accent);
    }

    /* CTA FINAL */
    .cta-final {
      margin-top:24px;
      padding:16px;
      border-radius:var(--radius-xl);
      border:1px solid var(--border-subtle);
      background:radial-gradient(circle at top, rgba(15,23,42,0.9), #020617);
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      font-size:13px;
      color:var(--text-soft);
    }

    .cta-final strong {
      color:var(--text);
    }

    @media (max-width:840px){
      .demo-header{flex-direction:column; align-items:flex-start;}
      .demo-header-right{justify-content:flex-start;}
      .demo-grid{grid-template-columns:minmax(0,1fr);}
      .cta-final{flex-direction:column; align-items:flex-start;}
    }
  </style>
</head>
<body>
  <main class="page">
    <!-- HEADER DEMO -->
    <header class="demo-header">
      <div class="demo-logo">
        <div class="logo-mark">A</div>
        <div>
          <div class="demo-logo-text-title">ADD Systems</div>
          <div class="demo-logo-text-sub">Demo ADD Bookings ‚Äì Barber√≠a</div>
        </div>
      </div>
      <div class="demo-header-right">
        <div class="demo-tag">Simulaci√≥n real de reserva + pago (modo demo)</div>
        <a href="index.html" class="btn btn-outline btn-back">
          <span>‚Üê</span> Volver a la p√°gina anterior
        </a>
      </div>
    </header>

    <!-- HERO / PASOS -->
    <section class="demo-hero">
      <h1 class="demo-title">
        As√≠ se ver√≠a tu <strong>sistema de reservas</strong> para barber√≠a con ADD Bookings.
      </h1>
      <p class="demo-sub">
        Desde el punto de vista del cliente: elige un estilo de corte profesional, fecha, horario y m√©todo de pago.
        Desde tu lado: todo entra ordenado, con dep√≥sito y sin mensajes sueltos en WhatsApp.
      </p>

      <div class="steps" id="steps">
        <div class="step active" data-step="1">
          <div class="step-badge">1</div>
          Servicio y estilo
        </div>
        <div class="step" data-step="2">
          <div class="step-badge">2</div>
          Fecha y horario
        </div>
        <div class="step" data-step="3">
          <div class="step-badge">3</div>
          Pago y confirmaci√≥n
        </div>
      </div>

      <div class="demo-grid">
        <!-- LADO IZQUIERDO: FORMULARIO COMPLETO -->
        <article class="card">
          <h2 class="card-title">Configura una reserva demo</h2>
          <p class="card-sub">
            Completa los datos como si fueras un cliente real. El sistema calcula el dep√≥sito,
            genera el resumen y crea un mensaje listo para enviar por WhatsApp.
          </p>

          <form id="demo-booking-form" class="field-group">
            <label>
              Nombre del cliente
              <input name="nombre" required placeholder="Ej: Kevin Torres" />
            </label>

            <label>
              Estilo de corte
              <select name="servicio" id="servicio-select">
                <option value="classic">Corte cl√°sico ejecutivo</option>
                <option value="midfade">Mid Fade + Textured Crop</option>
                <option value="highfade">High Fade + Pompadour</option>
                <option value="taperbeard">Taper Fade + Beard Sculpt</option>
                <option value="buzz">Buzz Cut 0.5 / Skin Fade</option>
                <option value="artist">Artist Session ‚Äì Corte urbano artista</option>
              </select>
            </label>

            <div id="service-meta" class="service-meta">
              Duraci√≥n aprox.: <strong>45 min</strong> ¬∑ Nivel: Cl√°sico / Ejecutivo ¬∑
              Ideal para: reuniones, oficina, eventos formales.
            </div>

            <div class="chip-row">
              <div class="chip">Degradado limpio</div>
              <div class="chip">Acabado a tijera</div>
              <div class="chip urban">Apto c√°mara / foto</div>
            </div>

            <div class="field-inline">
              <label>
                D√≠a
                <div class="input-shell">
                  <span class="input-shell-icon">üìÖ</span>
                  <input type="date" name="fecha" id="fecha-input" required />
                </div>
              </label>
              <label>
                Hora
                <div class="input-shell">
                  <span class="input-shell-icon">üïí</span>
                  <input type="time" name="hora" id="hora-input" required />
                </div>
              </label>
            </div>

            <div class="field-inline">
              <label>
                Barber seleccionado (opcional)
                <input name="barbero" placeholder="Ej: Mike, FadeMaster, etc." />
              </label>
              <label>
                WhatsApp de contacto
                <input name="whatsapp" placeholder="+1 ..." />
              </label>
            </div>

            <label>
              Comentarios adicionales (dise√±os, referencia, longitud, etc.)
              <textarea name="nota" rows="2" placeholder="Ej: Quiero un mid fade con la parte de arriba texturizada, sin l√≠nea dura."></textarea>
            </label>

            <div class="field-inline">
              <label>
                M√©todo de pago preferido (demo)
                <select name="pago" id="pago-select">
                  <option value="tarjeta">Tarjeta / pago online</option>
                  <option value="cashapp">Cash App / Zelle</option>
                  <option value="efectivo">Pago en efectivo en la barber√≠a</option>
                </select>
              </label>
              <label>
                ¬øDep√≥sito adelantado?
                <select name="deposito" id="deposito-select">
                  <option value="30">30% (recomendado)</option>
                  <option value="50">50%</option>
                  <option value="0">Sin dep√≥sito (no recomendado)</option>
                </select>
              </label>
            </div>

            <button type="submit" class="btn btn-primary" style="align-self:flex-start; margin-top:6px;">
              Generar reserva demo
            </button>
            <p id="demo-status" class="status"></p>
          </form>
        </article>

        <!-- LADO DERECHO: RESUMEN + WHATSAPP -->
        <div class="side-column">
          <article class="card">
            <h2 class="card-title">Resumen y pago (modo demo)</h2>
            <p class="card-sub">
              As√≠ ver√≠as t√∫ la cita en tu panel: servicio, horario, dep√≥sito y saldo pendiente.
              En la implementaci√≥n real se conecta al proveedor de pago que ya uses.
            </p>

            <div class="summary-row">
              <span>Servicio:</span>
              <span id="summary-service">Corte cl√°sico ejecutivo</span>
            </div>
            <div class="summary-row">
              <span>Duraci√≥n aprox.:</span>
              <span id="summary-duration">45 min</span>
            </div>
            <div class="summary-row">
              <span>Fecha y hora:</span>
              <span id="summary-datetime">‚Äî</span>
            </div>
            <div class="summary-row">
              <span>Barber:</span>
              <span id="summary-barber">Asignado autom√°ticamente</span>
            </div>

            <hr style="border:none; border-top:1px dashed rgba(55,65,81,0.8); margin:10px 0;" />

            <div class="summary-row">
              <span>Total servicio:</span>
              <span class="price-highlight" id="summary-price">$45</span>
            </div>
            <div class="summary-row">
              <span>Dep√≥sito (demo):</span>
              <span id="summary-deposit">$13.50</span>
            </div>
            <div class="summary-row">
              <span>Resto al llegar:</span>
              <span id="summary-rest">$31.50</span>
            </div>
            <div class="deposit-text" id="deposit-text">
              Dep√≥sito del 30% para bloquear la hora. Si no llegas, el dep√≥sito no es reembolsable.
            </div>

            <div class="payment-methods">
              M√©todo de pago seleccionado:
              <div class="summary-row summary-row-muted">
                <span id="summary-payment">Tarjeta / pago online</span>
                <span style="font-size:10px;">Vista demo</span>
              </div>
              <div class="payment-tags">
                <div class="payment-tag">Tarjeta</div>
                <div class="payment-tag">Online</div>
                <div class="payment-tag">Cash App</div>
                <div class="payment-tag">Zelle</div>
                <div class="payment-tag">Efectivo</div>
              </div>
            </div>

            <button type="button" class="btn btn-primary" style="margin-top:10px; width:100%; justify-content:center;" id="btn-pago-demo">
              Simular ‚ÄúPagar dep√≥sito ahora‚Äù
            </button>
            <p id="pago-status" class="status"></p>
          </article>

          <article class="card">
            <h2 class="card-title">C√≥mo le llega al cliente por WhatsApp</h2>
            <p class="card-sub">
              Esto es lo que tu cliente ver√≠a para confirmar: ordenado, claro y sin confusiones.
            </p>
            <div class="badge-demo">
              <span></span> Mensaje generado autom√°ticamente por ADD Bookings (demo)
            </div>
            <div id="whatsapp-preview" class="whatsapp-preview">
Cliente: (aqu√≠ ver√°s el mensaje listo para enviar por WhatsApp cuando generes la reserva demo).
            </div>
          </article>
        </div>
      </div>

      <!-- CTA FINAL -->
      <div class="cta-final">
        <div>
          <strong>¬øTe imaginas este flujo trabajando 24/7 para tu barber√≠a?</strong><br />
          Configuramos tus estilos de corte (cl√°sicos, urbanos y de artista), tus precios,
          barberos y dep√≥sitos, y lo conectamos con tu WhatsApp.
        </div>
        <a
          href="https://tidycal.com/tu-enlace-de-demo?notes=Interesado%20en%20ADD%20Bookings%20(barber%C3%ADa)"
          target="_blank"
          rel="noopener"
          class="btn btn-primary"
        >
          Quiero esto en mi negocio
        </a>
      </div>
    </section>
  </main>

  <script>
    // --------- DATOS DE SERVICIOS ----------
    var serviciosData = {
      classic: {
        nombre: "Corte cl√°sico ejecutivo",
        duracion: 45,
        precio: 40,
        meta: "Duraci√≥n aprox.: <strong>45 min</strong> ¬∑ Nivel: Cl√°sico / Ejecutivo ¬∑ Ideal para: oficina, reuniones, eventos formales.",
        chips: ["Perfil limpio", "Acabado tijera + m√°quina", "Apto foto profesional"]
      },
      midfade: {
        nombre: "Mid Fade + Textured Crop",
        duracion: 50,
        precio: 45,
        meta: "Duraci√≥n aprox.: <strong>50 min</strong> ¬∑ Nivel: Urbano / Actual ¬∑ Ideal para: uso diario, redes y contenido.",
        chips: ["Degradado medio", "Textura en la parte superior", "Look moderno para c√°mara"]
      },
      highfade: {
        nombre: "High Fade + Pompadour",
        duracion: 55,
        precio: 50,
        meta: "Duraci√≥n aprox.: <strong>55 min</strong> ¬∑ Nivel: Escenario / Evento ¬∑ Ideal para: conciertos, presentaciones, fiestas.",
        chips: ["Fade alto", "Volumen controlado", "Pulido con producto profesional"]
      },
      taperbeard: {
        nombre: "Taper Fade + Beard Sculpt",
        duracion: 60,
        precio: 55,
        meta: "Duraci√≥n aprox.: <strong>60 min</strong> ¬∑ Nivel: Imagen completa ¬∑ Incluye: contorno barba + definici√≥n.",
        chips: ["Taper en nuca y patillas", "Barba line up", "Acabado caliente / toalla"]
      },
      buzz: {
        nombre: "Buzz Cut 0.5 / Skin Fade",
        duracion: 35,
        precio: 35,
        meta: "Duraci√≥n aprox.: <strong>35 min</strong> ¬∑ Nivel: Minimal / Pr√°ctico ¬∑ Ideal para: mantenimiento r√°pido, deportistas.",
        chips: ["M√°quina a una medida", "Opcional skin fade", "Mantenimiento sencillo"]
      },
      artist: {
        nombre: "Artist Session ‚Äì Corte urbano artista",
        duracion: 75,
        precio: 80,
        meta: "Duraci√≥n aprox.: <strong>75 min</strong> ¬∑ Nivel: Escena / Video / Portada ¬∑ Pensado para artistas y creadores.",
        chips: ["Fade personalizado", "Detalles/dise√±os a medida", "Enfoque en c√°mara, luces y foto"]
      }
    };

    var form = document.getElementById("demo-booking-form");
    var statusEl = document.getElementById("demo-status");
    var preview = document.getElementById("whatsapp-preview");

    var servicioSelect = document.getElementById("servicio-select");
    var pagoSelect = document.getElementById("pago-select");
    var depositoSelect = document.getElementById("deposito-select");

    var serviceMetaEl = document.getElementById("service-meta");
    var chipsRow = document.querySelector(".chip-row");

    var summaryService = document.getElementById("summary-service");
    var summaryDuration = document.getElementById("summary-duration");
    var summaryDatetime = document.getElementById("summary-datetime");
    var summaryBarber = document.getElementById("summary-barber");
    var summaryPrice = document.getElementById("summary-price");
    var summaryDeposit = document.getElementById("summary-deposit");
    var summaryRest = document.getElementById("summary-rest");
    var depositText = document.getElementById("deposit-text");
    var summaryPayment = document.getElementById("summary-payment");
    var pagoStatus = document.getElementById("pago-status");
    var btnPagoDemo = document.getElementById("btn-pago-demo");

    var fechaInput = document.getElementById("fecha-input");

    // --------- INICIALIZAR FECHA (bloquear pasadas) ----------
    if (fechaInput) {
      var hoy = new Date();
      var yyyy = hoy.getFullYear();
      var mm = String(hoy.getMonth() + 1).padStart(2, "0");
      var dd = String(hoy.getDate()).padStart(2, "0");
      var hoyStr = yyyy + "-" + mm + "-" + dd;
      fechaInput.min = hoyStr;
      fechaInput.value = hoyStr;
    }

    // --------- MENU DE PASOS DIN√ÅMICO POR CURSOR ----------
    var stepsContainer = document.getElementById("steps");
    if (stepsContainer) {
      var steps = stepsContainer.querySelectorAll(".step");
      steps.forEach(function(step) {
        step.addEventListener("mouseenter", function() {
          steps.forEach(function(s) { s.classList.remove("active"); });
          step.classList.add("active");
        });
      });
    }

    // --------- L√ìGICA SERVICIOS / PAGO ----------
    function actualizarServicio() {
      var key = servicioSelect.value;
      var data = serviciosData[key] || serviciosData["classic"];

      serviceMetaEl.innerHTML = data.meta;
      summaryService.textContent = data.nombre;
      summaryDuration.textContent = data.duracion + " min";
      summaryPrice.textContent = "$" + data.precio;

      // chips
      chipsRow.innerHTML = "";
      (data.chips || []).forEach(function(ch, idx) {
        var div = document.createElement("div");
        div.className = "chip" + (idx === data.chips.length - 1 ? " urban" : "");
        div.textContent = ch;
        chipsRow.appendChild(div);
      });

      actualizarDepositoYRestante();
    }

    function actualizarDepositoYRestante() {
      var key = servicioSelect.value;
      var data = serviciosData[key] || serviciosData["classic"];
      var precio = data.precio;
      var porcentaje = parseInt(depositoSelect.value || "30", 10);

      if (isNaN(porcentaje)) porcentaje = 30;

      var deposito = (precio * porcentaje) / 100;
      var resto = precio - deposito;

      summaryDeposit.textContent = "$" + deposito.toFixed(2);
      summaryRest.textContent = "$" + resto.toFixed(2);

      if (porcentaje === 0) {
        depositText.textContent =
          "Reserva sin dep√≥sito (no recomendado): mayor riesgo de no-shows.";
        depositText.style.color = "#f97373";
      } else {
        depositText.textContent =
          "Dep√≥sito del " + porcentaje + "% para bloquear la hora. Pol√≠tica de cancelaci√≥n seg√∫n tu barber√≠a.";
        depositText.style.color = "#fbbf24";
      }
    }

    function actualizarPago() {
      var value = pagoSelect.value;
      var text = "Tarjeta / pago online";
      if (value === "cashapp") text = "Cash App / Zelle";
      if (value === "efectivo") text = "Pago en efectivo en la barber√≠a";
      summaryPayment.textContent = text;
    }

    if (servicioSelect) {
      servicioSelect.addEventListener("change", actualizarServicio);
    }

    if (depositoSelect) {
      depositoSelect.addEventListener("change", actualizarDepositoYRestante);
    }

    if (pagoSelect) {
      pagoSelect.addEventListener("change", actualizarPago);
    }

    if (btnPagoDemo && pagoStatus) {
      btnPagoDemo.addEventListener("click", function () {
        pagoStatus.style.color = "#22c55e";
        pagoStatus.textContent =
          "Pago de dep√≥sito simulado correctamente (solo modo demo). En producci√≥n aqu√≠ se conecta tu pasarela real.";
      });
    }

    if (form && statusEl && preview) {
      form.addEventListener("submit", function(e){
        e.preventDefault();
        var data = Object.fromEntries(new FormData(form).entries());

        var key = data.servicio || "classic";
        var sData = serviciosData[key] || serviciosData["classic"];
        var porcentaje = parseInt(data.deposito || "30", 10);
        if (isNaN(porcentaje)) porcentaje = 30;
        var deposito = (sData.precio * porcentaje) / 100;
        var resto = sData.precio - deposito;

        // Actualizamos resumen
        summaryDatetime.textContent =
          (data.fecha || "‚Äî") + " ¬∑ " + (data.hora || "‚Äî");
        summaryBarber.textContent =
          data.barbero && data.barbero.trim()
            ? data.barbero
            : "Asignado autom√°ticamente";

        actualizarServicio();
        actualizarPago();
        actualizarDepositoYRestante();

        statusEl.style.color = "#22c55e";
        statusEl.textContent =
          "Reserva demo generada. Mira el resumen y el mensaje de WhatsApp de ejemplo.";

        var pagoTxt = summaryPayment.textContent || "";
        var nombre = data.nombre || "cliente";

        var text =
          "‚úÖ *Reserva confirmada ‚Äì BARBER√çA DEMO*\n\n" +
          "Hola " + nombre + ", tu cita ha quedado agendada.\n\n" +
          "üíá Estilo: " + sData.nombre + "\n" +
          "‚è± Duraci√≥n aprox.: " + sData.duracion + " min\n" +
          "üìÖ D√≠a: " + (data.fecha || "por definir") + "\n" +
          "üïí Hora: " + (data.hora || "por definir") + "\n" +
          "üíà Barber: " +
          (data.barbero && data.barbero.trim()
            ? data.barbero
            : "Asignado seg√∫n disponibilidad") +
          "\n\n" +
          "üíµ Total: $" + sData.precio.toFixed(2) + "\n" +
          (porcentaje > 0
            ? "üîê Dep√≥sito (" + porcentaje + "%): $" + deposito.toFixed(2) + " (" + pagoTxt + ")\n" +
              "üí≥ Resto al llegar: $" + resto.toFixed(2) + "\n"
            : "‚ö†Ô∏è Sin dep√≥sito seleccionado (puede incrementar no-shows).\n") +
          "\n" +
          "üìé Nota: " +
          (data.nota && data.nota.trim()
            ? data.nota.trim()
            : "Sin comentarios adicionales.") +
          "\n\n" +
          "Si necesitas mover la cita, responde este mensaje con al menos 4 horas de anticipaci√≥n.\n" +
          "Gracias por reservar con *ADD Bookings ‚Äì Barber√≠a Demo*.";

        preview.textContent = text;
      });
    }

    // Inicializar con valores por defecto
    actualizarServicio();
    actualizarPago();
    actualizarDepositoYRestante();
  </script>
</body>
</html>
